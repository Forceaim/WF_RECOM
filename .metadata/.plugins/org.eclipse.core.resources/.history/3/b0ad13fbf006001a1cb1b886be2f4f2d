<?xml version="1.0" encoding="UTF-8"?>

<process-definition  name="DepotRapport3">


	<start-state name="Debut">
		<transition to="Depot du rapport(SFD)"></transition>
	</start-state>


	<task-node name="Depot du rapport(SFD)">
		<task name="Déposer le rapport">
			<assignment actor-id="okmSfd"></assignment>
			<controller class=""></controller>
		</task>
		<timer duedate="15 seconds" name="depot timer" transition="toMailDelai"></timer>
		<transition to="mailDepotToAdmin" name="transmission"></transition>
	</task-node>

	<task-node name="Traitement du rapport(ARSM)">
		<task name="Traiter le rapport">
			<assignment actor-id="okmArsm"></assignment>
			<controller class=""></controller>
		</task>
		<transition to="mailConformToAdmin" name="conforme"></transition>
		<transition to="mailNonConformToAdmin" name="nonConforme"></transition>
	</task-node>

	<task-node name="Validation du rapport (SE)">
		<task name="Valider le rapport">
			<assignment actor-id="okmSe"></assignment>
		</task>
		<transition to="mailValide" name="valider"></transition>
	</task-node>

	<mail-node name="mailNonConformToAdmin" actors="okmAdmin">
		<subject>
			Rapport non conforme
		</subject>
		<text>
			Le rapport est non conforme et est réenvoyé au SFD
		</text>
		<timer duedate="30 seconds" name="mail timer" transition="verifier"></timer>
		<transition to="Depot du rapport(SFD)" name="depot">
			<action></action>
			<action></action>
			<action></action>
		</transition>
	</mail-node>

	<mail-node name="mailDepotToAdmin" actors="okmAdmin">
		<subject>
			Rapport déposé
		</subject>
		<text>
			Le rapport est déposé par SFD
		</text>
		<transition to="Traitement du rapport(ARSM)"></transition>
	</mail-node>

	<mail-node name="mailConformToAdmin" actors="okmAdmin">
		<subject>
			Rapport conforme
		</subject>
		<text>
			Le rapport est traité par l'ARSM est en attente de validation
		</text>
		<transition to="Validation du rapport (SE)"></transition>
	</mail-node>

	<mail-node name="mailValide" actors="okmAdmin,okmSfd,okmArsm,okmSe">
		<subject>
			Rapport validé
		</subject>
		<text>
			Le rapport est validé par SE
		</text>
		<transition to="Fin"></transition>
	</mail-node>


	<end-state name="Fin"></end-state>


	<action class="com.sample.action.RefusedDocumentHandler">
		<uuid></uuid>
	</action>


</process-definition>